version: "1.1"
phase: 1

items:
  - id: D-001
    requirement: "Phase 1 ADR exists"
    evidence:
      type: file_exists
      path: docs/adr/ADR-001-phase1-ingestion-grounded-summary.md

  - id: D-002
    requirement: "Phase 1 runtime contract exists"
    evidence:
      type: file_exists
      path: docs/contracts/PHASE1_RUNTIME_CONTRACT.md

  - id: D-003
    requirement: "Phase 1 acceptance checklist exists"
    evidence:
      type: file_exists
      path: docs/checklists/PHASE1_ACCEPTANCE_CHECKLIST.yaml

  - id: C-001
    requirement: "Contracts module exists"
    evidence:
      type: file_exists
      path: src/paperta/contracts.py

  - id: C-002
    requirement: "Ingestion service module exists"
    evidence:
      type: file_exists
      path: src/paperta/ingestion.py

  - id: C-003
    requirement: "Retrieval service module exists"
    evidence:
      type: file_exists
      path: src/paperta/retrieval.py

  - id: C-004
    requirement: "Summary service module exists"
    evidence:
      type: file_exists
      path: src/paperta/summary.py

  - id: C-005
    requirement: "Pipeline module exists"
    evidence:
      type: file_exists
      path: src/paperta/pipeline.py

  # Three-Test Rule matrix (component-level)
  - id: T-INGEST-UNIT-001
    requirement: "Ingestion unit test exists"
    evidence:
      type: test_exists
      test_pattern: tests/unit/test_ingestion.py
      test_name: test_chunking_assigns_stable_chunk_ids

  - id: T-INGEST-INT-001
    requirement: "Ingestion integration test exists"
    evidence:
      type: test_exists
      test_pattern: tests/integration/test_phase1_pipeline.py
      test_name: test_pipeline_uses_ingestion_section_order

  - id: T-INGEST-NEG-001
    requirement: "Ingestion negative test exists"
    evidence:
      type: test_exists
      test_pattern: tests/negative/test_ingestion_negative.py
      test_name: test_ingestion_rejects_duplicate_sections

  - id: T-RETRIEVE-UNIT-001
    requirement: "Retrieval unit test exists"
    evidence:
      type: test_exists
      test_pattern: tests/unit/test_retrieval.py
      test_name: test_retrieval_orders_by_overlap_score

  - id: T-RETRIEVE-INT-001
    requirement: "Retrieval integration test exists"
    evidence:
      type: test_exists
      test_pattern: tests/integration/test_phase1_pipeline.py
      test_name: test_pipeline_retrieval_trace_contains_chunk_ids

  - id: T-RETRIEVE-NEG-001
    requirement: "Retrieval negative test exists"
    evidence:
      type: test_exists
      test_pattern: tests/negative/test_retrieval_negative.py
      test_name: test_retrieval_rejects_non_positive_top_k

  - id: T-SUMMARY-UNIT-001
    requirement: "Summary unit test exists"
    evidence:
      type: test_exists
      test_pattern: tests/unit/test_summary.py
      test_name: test_summary_bullets_include_citations

  - id: T-SUMMARY-UNIT-002
    requirement: "Summary enforces invariant 3 for unknown chunk IDs"
    evidence:
      type: test_exists
      test_pattern: tests/unit/test_summary.py
      test_name: test_summary_rejects_unknown_chunk_ids

  - id: T-SUMMARY-INT-001
    requirement: "Summary integration test exists"
    evidence:
      type: test_exists
      test_pattern: tests/integration/test_phase1_pipeline.py
      test_name: test_phase1_pipeline_generates_grounded_summary

  - id: T-SUMMARY-NEG-001
    requirement: "Summary negative test exists"
    evidence:
      type: test_exists
      test_pattern: tests/negative/test_summary_negative.py
      test_name: test_summary_returns_not_stated_when_no_evidence

  # Contract failure modes coverage
  - id: F-001
    requirement: "Failure mode: empty paper content raises ValueError"
    evidence:
      type: test_exists
      test_pattern: tests/negative/test_pipeline_negative.py
      test_name: test_pipeline_rejects_empty_paper

  - id: F-002
    requirement: "Failure mode: empty query raises ValueError"
    evidence:
      type: test_exists
      test_pattern: tests/negative/test_pipeline_negative.py
      test_name: test_pipeline_rejects_empty_query

  - id: F-003
    requirement: "Failure mode: top_k <= 0 raises ValueError"
    evidence:
      type: test_exists
      test_pattern: tests/negative/test_retrieval_negative.py
      test_name: test_retrieval_rejects_non_positive_top_k

  - id: F-004
    requirement: "Failure mode: empty retrieval yields Not stated in the paper"
    evidence:
      type: test_exists
      test_pattern: tests/negative/test_summary_negative.py
      test_name: test_summary_returns_not_stated_when_no_evidence

  - id: F-005
    requirement: "Failure mode: duplicate section labels raise ValueError"
    evidence:
      type: test_exists
      test_pattern: tests/negative/test_ingestion_negative.py
      test_name: test_ingestion_rejects_duplicate_sections

  - id: F-006
    requirement: "Failure mode: invalid mode raises ValueError"
    evidence:
      type: test_exists
      test_pattern: tests/negative/test_pipeline_negative.py
      test_name: test_pipeline_rejects_invalid_mode
